<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>RSpec Execution Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { padding-top: 2rem; background-color: #f8f9fa; }
      .table-container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075); margin-bottom: 3rem; }
      .anchor-offset { display: block; position: relative; top: -20px; visibility: hidden; }
      .badge-passed { background-color: #198754; }
      .badge-failed { background-color: #dc3545; }
    </style>
  </head>
  <body class="container">
    <div class="table-container">
      <h1 class="mb-4">⏱️ RSpec Execution Report</h1>
      <p><strong>Finished at:</strong> <%= @finished_at %></p>
      <h3 id="top">Slowest 20 Specs</h3>
      <table class="table table-hover table-sm">
        <thead class="table-dark">
          <tr>
            <th>Duration</th>
            <th>Spec File</th>
            <th>Description</th>
            <th>Line</th>
          </tr>
        </thead>
        <tbody>
          <%= @slowest_specs_rows %>
        </tbody>
      </table>
    </div>

    <div class="table-container">
      <h3 id="folders-table">Folder Aggregates</h3>
      <table class="table table-striped">
        <thead class="table-primary">
          <tr><th>Folder Name</th><th>Tests</th><th>Total Duration</th><th>Avg/Test</th></tr>
        </thead>
        <tbody>
          <%= @folder_summary_rows %>
        </tbody>
      </table>
    </div>

    <%= @detailed_tables %>
  </body>
</html>
